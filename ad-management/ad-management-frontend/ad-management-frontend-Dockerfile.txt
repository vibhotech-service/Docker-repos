FROM node:18-alpine

WORKDIR /opt/plugin/.hidden-p/ad-management-frontend


RUN apk add --no-cache supervisor nginx certbot

COPY . .

RUN npm install -g serve

COPY  ad-management-frontend.conf /etc/supervisor/conf.d/ad-management-frontend.conf

COPY /nginx /etc/nginx/

COPY /live /etc/letsencrypt/live

EXPOSE 3018

CMD ["supervisord", "-c", "/etc/supervisor/conf.d/ad-management-frontend.conf"]
